assert(load(Base64Decode("bWFwSW5kZXggPSBHZXRHYW1lKCkubWFwLmluZGV4CgpmdW5jdGlvbiBPbkxvYWQoKQoJZW5lbXlIZXJvZXMgPSBHZXRFbmVteUhlcm9lcygpCgoJQ29uZmlnID0gc2NyaXB0Q29uZmlnKCJteVZpc2lvbiIsICJteVZpc2lvbiIpCgoJQ29uZmlnOmFkZFN1Yk1lbnUoIldheSBQb2ludHMiLCAid2F5UG9pbnRzIikKCQlDb25maWcud2F5UG9pbnRzOmFkZFBhcmFtKCJkcmF3V29ybGQiLCAiRHJhdyAzRCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCQlDb25maWcud2F5UG9pbnRzOmFkZFBhcmFtKCJkcmF3TWluaW1hcCIsICJEcmF3IDJEIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJCUNvbmZpZy53YXlQb2ludHM6YWRkUGFyYW0oImRyYXdFVEEiLCAiRHJhdyBFVEEiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgkJQ29uZmlnLndheVBvaW50czphZGRQYXJhbSgiZHJhd1giLCAiRHJhdyBDcm9zcyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCglDb25maWcud2F5UG9pbnRzOmFkZFN1Yk1lbnUoIkFsbGllcyIsICJhbGxpZXMiKQoJCUNvbmZpZy53YXlQb2ludHMuYWxsaWVzOmFkZFBhcmFtKCJlbmFibGVkIiwgIkVuYWJsZWQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgkJQ29uZmlnLndheVBvaW50cy5hbGxpZXM6YWRkUGFyYW0oImNvbG9yIiwgIkNvbG9yIiwgU0NSSVBUX1BBUkFNX0NPTE9SLCB7MjU1LCAwLCAyNTUsIDI1NX0pCgkJQ29uZmlnLndheVBvaW50cy5hbGxpZXM6YWRkUGFyYW0obXlIZXJvLmNoYXJOYW1lLCBteUhlcm8uY2hhck5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCQlmb3IgXywgYWxseSBpbiBwYWlycyhHZXRBbGx5SGVyb2VzKCkpIGRvCgkJCUNvbmZpZy53YXlQb2ludHMuYWxsaWVzOmFkZFBhcmFtKGFsbHkuY2hhck5hbWUsIGFsbHkuY2hhck5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCQllbmQKCglDb25maWcud2F5UG9pbnRzOmFkZFN1Yk1lbnUoIkVuZW1pZXMiLCAiYXhpcyIpCgkJQ29uZmlnLndheVBvaW50cy5heGlzOmFkZFBhcmFtKCJlbmFibGVkIiwgIkVuYWJsZWQiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgkJQ29uZmlnLndheVBvaW50cy5heGlzOmFkZFBhcmFtKCJjb2xvciIsICJDb2xvciIsIFNDUklQVF9QQVJBTV9DT0xPUiwgezI1NSwgMjU1LCAwLCAwfSkKCQlmb3IgXywgZW5lbXkgaW4gcGFpcnMoZW5lbXlIZXJvZXMpIGRvCgkJCUNvbmZpZy53YXlQb2ludHMuYXhpczphZGRQYXJhbShlbmVteS5jaGFyTmFtZSwgZW5lbXkuY2hhck5hbWUsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCQllbmQKCglpZiBtYXBJbmRleCA9PSAxIHRoZW4KCQlDb25maWc6YWRkU3ViTWVudSgiSGlkZGVuIE9iamVjdHMiLCAiaGlkZGVuT2JqZWN0cyIpCgkJCUNvbmZpZy5oaWRkZW5PYmplY3RzOmFkZFBhcmFtKCJkcmF3QWxseSIsICJEcmF3IGFsbHkgd2FyZHMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgkJCUNvbmZpZy5oaWRkZW5PYmplY3RzOmFkZFBhcmFtKCJkcmF3QXhpcyIsICJEcmF3IGVuZW15IHdhcmRzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJCQlDb25maWcuaGlkZGVuT2JqZWN0czphZGRQYXJhbSgiZHJhd01pbmltYXAiLCAiRHJhdyBvbiBtaW5pbWFwIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJCQlDb25maWcuaGlkZGVuT2JqZWN0czphZGRQYXJhbSgibm90aWZ5Rk9XIiwgIk5vdGlmeSBGT1cgd2FyZHMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgkJCUNvbmZpZy5oaWRkZW5PYmplY3RzOmFkZFBhcmFtKCJ1c2VMRkMiLCAiVXNlIGxhZy1mcmVlIGNpcmNsZXMiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgllbmQKCglDb25maWc6YWRkU3ViTWVudSgiTWluaW1hcCBUaW1lcnMiLCAibWluaW1hcFRpbWVycyIpCgkJQ29uZmlnLm1pbmltYXBUaW1lcnM6YWRkUGFyYW0oImVuYWJsZWQiLCAiRW5hYmxlZCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCQlDb25maWcubWluaW1hcFRpbWVyczphZGRQYXJhbSgiaG90a2V5IiwgIkNsZWFyIGNhbXAgaG90a2V5IiAsIFNDUklQVF9QQVJBTV9PTktFWURPV04sIGZhbHNlLCBHZXRLZXkoJ0snKSkKCQlDb25maWcubWluaW1hcFRpbWVyczphZGRQYXJhbSgidGV4dFNpemUiLCAiTWluaW1hcCB0ZXh0IHNpemUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDE0LCAxMCwgMjAsIDApCgkJQ29uZmlnLm1pbmltYXBUaW1lcnM6YWRkUGFyYW0oInRleHRDb2xvciIsICJNaW5pbWFwIHRleHQgY29sb3IiLCBTQ1JJUFRfUEFSQU1fQ09MT1IsIHsyNTUsIDI1NSwgMjU1LCAyNTV9KQoJCUNvbmZpZy5taW5pbWFwVGltZXJzOmFkZFBhcmFtKCJzZW5kQ2hhdEtleSIsICJTZW5kIHRvIGNoYXQgb24gY2xpY2sgaG90a2V5IiwgU0NSSVBUX1BBUkFNX09OS0VZRE9XTiwgZmFsc2UsIDB4MTApCgoJQ29uZmlnOmFkZFN1Yk1lbnUoIk92ZXJoZWFkIEhVRCIsICJvdmVyaGVhZEhVRCIpCgkJQ29uZmlnLm92ZXJoZWFkSFVEOmFkZFBhcmFtKCJkcmF3QWJpbGl0aWVzIiwgIkRyYXcgYWJpbGl0aWVzIiwgU0NSSVBUX1BBUkFNX09OT0ZGLCB0cnVlKQoJCUNvbmZpZy5vdmVyaGVhZEhVRDphZGRQYXJhbSgiZHJhd1N1bW1vbmVycyIsICJEcmF3IHN1bW1vbmVyIHNwZWxscyIsIFNDUklQVF9QQVJBTV9PTk9GRiwgdHJ1ZSkKCQlDb25maWcub3ZlcmhlYWRIVUQ6YWRkUGFyYW0oInNob3dEZXRhaWxzIiwgIlNob3cgZGV0YWlscyIsIFNDUklQVF9QQVJBTV9PTktFWVRPR0dMRSwgZmFsc2UsIDB4MTApCgoJaWYgbWFwSW5kZXggfj0gMTIgdGhlbgoJCUNvbmZpZzphZGRTdWJNZW51KCJSZWNhbGwgVHJhY2tlciIsICJyZWNhbGxUcmFja2VyIikKCQkJQ29uZmlnLnJlY2FsbFRyYWNrZXI6YWRkUGFyYW0oImRyYXdNaW5pbWFwIiwgIkRyYXcgY2lyY2xlIG9uIG1pbmltYXAiLCBTQ1JJUFRfUEFSQU1fT05PRkYsIHRydWUpCgkJCUNvbmZpZy5yZWNhbGxUcmFja2VyOmFkZFBhcmFtKCJtYXhTaXplIiwgIk1heGltdW0gY2lyY2xlIHNpemUiLCBTQ1JJUFRfUEFSQU1fU0xJQ0UsIDUwMDAsIDEwMDAsIDEwMDAwLCAwKQoJZW5kCgoJQ29uZmlnOmFkZFBhcmFtKCJ1cGRhdGVTY3JpcHQiLCAiVXBkYXRlIFNjcmlwdCIsIFNDUklQVF9QQVJBTV9PTk9GRiwgZmFsc2UpCglDb25maWcudXBkYXRlU2NyaXB0ID0gZmFsc2UgLS0gTWFrZSBzdXJlIEJvTCBkb2Vzbid0IHNhdmUgdGhlIHZhbHVlCgoJbG9jYWwgb1ByaW50Q2hhdCA9IFByaW50Q2hhdAoJUHJpbnRDaGF0ID0gZnVuY3Rpb24oaW5wdXQpCgkJb1ByaW50Q2hhdCgiPGZvbnQgY29sb3I9XCIjQUFBQUFBXCI+PGI+bXlWaXNpb248L2I+OiA8L2ZvbnQ+PGZvbnQgY29sb3I9XCIjRkZGRkZGXCI+IiAuLiBpbnB1dCAuLiAiPC9mb250PiIpCgllbmQKCVByaW50RXJyb3IgPSBmdW5jdGlvbihpbnB1dCkKCQlvUHJpbnRDaGF0KCI8Zm9udCBjb2xvcj1cIiNBQUFBQUFcIj48Yj5teVZpc2lvbjwvYj46IDwvZm9udD48Zm9udCBjb2xvcj1cIiNGRjc3NzdcIj4iIC4uIGlucHV0IC4uICI8L2ZvbnQ+IikKCWVuZAoKCXdheVBvaW50cygpCgltaW5pbWFwVGltZXJzKCkKCWlmIG1hcEluZGV4ID09IDEgdGhlbgoJCWhpZGRlbk9iamVjdHMoKQoJZW5kCglpZiBtYXBJbmRleCB+PSAxMiB0aGVuCgkJcmVjYWxsVHJhY2tlcigpCgllbmQKCWNvbm5lY3Rpb25TdGF0dXMoKQoJb3ZlcmhlYWRIVUQoKQoKCWxvY2FsIHJldmlzaW9uID0gNQoJaWYgdG9udW1iZXIoR2V0V2ViUmVzdWx0KCJyYXcuZ2l0aHViLmNvbSIsICIvSm83ai9Cb0wvbWFzdGVyL215VmlzaW9uLnJldiIpKSA+IHJldmlzaW9uIHRoZW4KCQlQcmludENoYXQoIkEgbmV3IHVwZGF0ZSBpcyBhdmFpbGFibGUuIFBsZWFzZSB1cGRhdGUgdXNpbmcgdGhlIG1lbnUuIikKCWVuZAoJUHJpbnRDaGF0KCI8Zm9udCBjb2xvcj1cIiM3N0ZGNzdcIj5Mb2FkZWQ8L2ZvbnQ+IikKZW5kCgpmdW5jdGlvbiBPblduZE1zZyhtc2csIHdQYXJhbSkKCWlmIG1zZyA9PSBXTV9MQlVUVE9OVVAgYW5kIENvbmZpZy51cGRhdGVTY3JpcHQgdGhlbgoJCUNvbmZpZy51cGRhdGVTY3JpcHQgPSBmYWxzZQoJCVByaW50Q2hhdCgiVXBkYXRpbmciKQoJCURvd25sb2FkRmlsZSgiaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0pvN2ovQm9ML21hc3Rlci9teVZpc2lvbi5sdWEiLCBTQ1JJUFRfUEFUSCAuLiBHZXRDdXJyZW50RW52KCkuRklMRV9OQU1FLAoJCQlmdW5jdGlvbigpCgkJCQlQcmludENoYXQoIlVwZGF0ZSBmaW5pc2hlZCBQbGVhc2UgcmVsb2FkIChGOSkuIikKCQkJZW5kCgkJKQoJZW5kCmVuZAoKZnVuY3Rpb24gcm91bmQoZmxvYXQpCglsb2NhbCBkb3duID0gbWF0aC5mbG9vcihmbG9hdCkKCWlmIGZsb2F0ID49IGRvd24gKyAwLjUgdGhlbiAtLSByb3VuZCB1cAoJCXJldHVybiBtYXRoLmNlaWwoZmxvYXQpCgllbHNlIC0tIHJvdW5kIGRvd24KCQlyZXR1cm4gbWF0aC5mbG9vcihmbG9hdCkKCWVuZAplbmQKCmZ1bmN0aW9uIERyYXdMRkMoeCwgeSwgeiwgcmFkaXVzLCBjb2xvciwgcXVhbGl0eSkKCWxvY2FsIHJhZGl1cyA9IHJhZGl1cyBvciAzMDAKCWxvY2FsIHNjcmVlbk1pbiA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMoeCAtIHJhZGl1cywgeSwgeiArIHJhZGl1cykpCgoJaWYgT25TY3JlZW4oe3ggPSBzY3JlZW5NaW4ueCwgeSA9IHNjcmVlbk1pbi55fSwge3ggPSBzY3JlZW5NaW4ueCwgeSA9IHNjcmVlbk1pbi55fSkgdGhlbgoJCWxvY2FsIHF1YWxpdHkgPSBxdWFsaXR5IGFuZCAyICogbWF0aC5waSAvIHF1YWxpdHkgb3IgMiAqIG1hdGgucGkgLyBtYXRoLmZsb29yKHJhZGl1cyAvIDEwKQoJCWxvY2FsIGEgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHggKyByYWRpdXMgKiBtYXRoLmNvcygwKSwgeSwgeiAtIHJhZGl1cyAqIG1hdGguc2luKDApKSkKCgkJZm9yIHRoZXRhID0gcXVhbGl0eSwgMiAqIG1hdGgucGkgKyBxdWFsaXR5LCBxdWFsaXR5IGRvCgkJCWxvY2FsIGIgPSBXb3JsZFRvU2NyZWVuKEQzRFhWRUNUT1IzKHggKyByYWRpdXMgKiBtYXRoLmNvcyh0aGV0YSksIHksIHogLSByYWRpdXMgKiBtYXRoLnNpbih0aGV0YSkpKQoJCQlEcmF3TGluZShhLngsIGEueSwgYi54LCBiLnksIDEsIGNvbG9yKQoJCQlhID0gYgoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gR2V0SFBCYXJQb3ModW5pdCkKCWxvY2FsIGJhclBvcyA9IEdldFVuaXRIUEJhclBvcyh1bml0KQoJbG9jYWwgYmFyT2Zmc2V0ID0gR2V0VW5pdEhQQmFyT2Zmc2V0KHVuaXQpCgoJbG9jYWwgdCA9IHsKCQlbIkRhcml1cyJdID0gLTgsCgkJWyJSZW5la3RvbiJdID0gLTgsCgl9CglpZiB0W3VuaXQuY2hhck5hbWVdIHRoZW4KCQliYXJQb3MueCA9IGJhclBvcy54ICsgdFt1bml0LmNoYXJOYW1lXQoJZW5kCglyZXR1cm4gUG9pbnQoYmFyUG9zLnggLSA2OSwgYmFyUG9zLnkgKyAoYmFyT2Zmc2V0LnkgKiA1MCkgLSA2IC0gKHVuaXQuaXNNZSBhbmQgNiBvciAwKSkKZW5kCgpmdW5jdGlvbiBDTG9MUGFja2V0OkRlY29kZVN0cmluZygpCglsb2NhbCBzdHIgPSAiIgoJbG9jYWwgYnl0ZSA9IHN0cmluZy5mb3JtYXQoIiVjIiwgc2VsZjpEZWNvZGUxKCkpCgl3aGlsZSBieXRlIH49ICdcMCcgZG8KCQlzdHIgPSBzdHIgLi4gYnl0ZQoJCWJ5dGUgPSBzdHJpbmcuZm9ybWF0KCIlYyIsIHNlbGY6RGVjb2RlMSgpKQoJZW5kCglyZXR1cm4gc3RyCmVuZAoKY2xhc3MgIndheVBvaW50cyIKCmZ1bmN0aW9uIHdheVBvaW50czpfX2luaXQoKQoJc2VsZi53YXlQb2ludE1hbmFnZXIgPSBXYXlQb2ludE1hbmFnZXIoKQoKCUFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6T25EcmF3KCkgZW5kKQplbmQKCmZ1bmN0aW9uIHdheVBvaW50czpPbkRyYXcoKQoJZm9yIGkgPSAxLCBoZXJvTWFuYWdlci5pQ291bnQgZG8KCQlsb2NhbCBoZXJvID0gaGVyb01hbmFnZXI6Z2V0SGVybyhpKQoJCWlmIG5vdCBoZXJvLmRlYWQgYW5kIGhlcm8uaGFzTW92ZVBhdGggYW5kIChDb25maWcud2F5UG9pbnRzLmFsbGllcy5lbmFibGVkIGFuZCBoZXJvLnRlYW0gfj0gVEVBTV9FTkVNWSBhbmQgQ29uZmlnLndheVBvaW50cy5hbGxpZXNbaGVyby5jaGFyTmFtZV0pIG9yIChDb25maWcud2F5UG9pbnRzLmF4aXMuZW5hYmxlZCBhbmQgaGVyby50ZWFtID09IFRFQU1fRU5FTVkgYW5kIENvbmZpZy53YXlQb2ludHMuYXhpc1toZXJvLmNoYXJOYW1lXSkgdGhlbgoJCQlsb2NhbCBjb2xvciA9IGhlcm8udGVhbSA9PSBURUFNX0VORU1ZIGFuZCBDb25maWcud2F5UG9pbnRzLmF4aXMuY29sb3Igb3IgQ29uZmlnLndheVBvaW50cy5hbGxpZXMuY29sb3IKCQkJbG9jYWwgcHJldlBhdGggPSBWZWN0b3IoaGVybykKCQkJbG9jYWwgZlRpbWUgPSAwIC0tIEVzdGltYXRlZCB0aW1lIG9mIGFycml2YWwKCgkJCWZvciBpID0gaGVyby5wYXRoSW5kZXgsIGhlcm8ucGF0aENvdW50IGRvCgkJCQlsb2NhbCBwYXRoID0gaGVybzpHZXRQYXRoKGkpCgkJCQlpZiBwYXRoIH49IG5pbCB0aGVuCgkJCQkJaWYgQ29uZmlnLndheVBvaW50cy5kcmF3V29ybGQgdGhlbgoJCQkJCQlEcmF3TGluZTNEKHByZXZQYXRoLngsIHByZXZQYXRoLnksIHByZXZQYXRoLnosIHBhdGgueCwgcGF0aC55LCBwYXRoLnosIDEsIEFSR0IoY29sb3JbMV0sIGNvbG9yWzJdLCBjb2xvclszXSwgY29sb3JbNF0pKQoJCQkJCWVuZAoKCQkJCQlpZiBDb25maWcud2F5UG9pbnRzLmRyYXdNaW5pbWFwIGFuZCBub3QgaGVyby5pc01lIHRoZW4KCQkJCQkJRHJhd0xpbmUoR2V0TWluaW1hcFgocHJldlBhdGgueCAtIDEyOCksIEdldE1pbmltYXBZKHByZXZQYXRoLnogKyAxMjgpLCBHZXRNaW5pbWFwWChwYXRoLnggLSAxMjgpLCBHZXRNaW5pbWFwWShwYXRoLnogKyAxMjgpLCAxLCBBUkdCKGNvbG9yWzFdLCBjb2xvclsyXSwgY29sb3JbM10sIGNvbG9yWzRdKSkKCQkJCQllbmQKCgkJCQkJZlRpbWUgPSBmVGltZSArIChHZXREaXN0YW5jZShwcmV2UGF0aCwgcGF0aCkgLyBoZXJvLm1zKQoKCQkJCQlwcmV2UGF0aCA9IHBhdGgKCQkJCWVuZAoJCQllbmQKCgkJCWxvY2FsIHNjcmVlblBvcyA9IFdvcmxkVG9TY3JlZW4oRDNEWFZFQ1RPUjMocHJldlBhdGgueCwgcHJldlBhdGgueSwgcHJldlBhdGgueikpCgoJCQlpZiBDb25maWcud2F5UG9pbnRzLmRyYXdFVEEgdGhlbgoJCQkJbG9jYWwgc2Vjb25kcyA9IG1hdGgucm91bmQoZlRpbWUgJSA2MCkKCQkJCURyYXdUZXh0KG1hdGguZmxvb3IoZlRpbWUgLyA2MCkuLiI6Ii4uIChzZWNvbmRzID4gOSBhbmQgc2Vjb25kcyBvciAiMCIuLnNlY29uZHMpLCAxNiwgc2NyZWVuUG9zLnggLSAxMCwgc2NyZWVuUG9zLnkgKyA3LCBBUkdCKGNvbG9yWzFdLCBjb2xvclsyXSwgY29sb3JbM10sIGNvbG9yWzRdKSkKCQkJZW5kCgoJCQlpZiBDb25maWcud2F5UG9pbnRzLmRyYXdYIHRoZW4KCQkJCURyYXdMaW5lKHNjcmVlblBvcy54IC0gMTAsIHNjcmVlblBvcy55IC0gNywgc2NyZWVuUG9zLnggKyAxMCwgc2NyZWVuUG9zLnkgKyA3LCA1LCBBUkdCKGNvbG9yWzFdLCBjb2xvclsyXSAvIDIsIGNvbG9yWzNdIC8gMiwgY29sb3JbNF0gLyAyKSkKCQkJCURyYXdMaW5lKHNjcmVlblBvcy54ICsgMTAsIHNjcmVlblBvcy55IC0gNywgc2NyZWVuUG9zLnggLSAxMCwgc2NyZWVuUG9zLnkgKyA3LCA1LCBBUkdCKGNvbG9yWzFdLCBjb2xvclsyXSAvIDIsIGNvbG9yWzNdIC8gMiwgY29sb3JbNF0gLyAyKSkKCQkJZW5kCgkJZW5kCgllbmQKZW5kCgpjbGFzcyAiaGlkZGVuT2JqZWN0cyIKCmZ1bmN0aW9uIGhpZGRlbk9iamVjdHM6X19pbml0KCkKCXNlbGYuaGlkZGVuT2JqZWN0cyA9IHsKCQltZXRhID0gewoJCQl7ZHVyYXRpb24gPSAyNTAwMCwgaWQgPSA2NDI0NjEyLCBuYW1lID0gIlZpc2lvbldhcmQiLCBjaGFyTmFtZSA9ICJWaXNpb25XYXJkIiwgY29sb3IgPSBBUkdCKDI1NSwgMjU1LCAwLCAyNTUpLCB0eXBlID0gInBpbmsifSwgLS0gVmlzaW9uIFdhcmQKCQkJe2R1cmF0aW9uID0gMTgwLCBpZCA9IDIzNDU5NDY3NiwgbmFtZSA9ICJTaWdodFdhcmQiLCBjaGFyTmFtZSA9ICJTaWdodFdhcmQiLCBjb2xvciA9IEFSR0IoMjU1LCAwLCAyNTUsIDApLCB0eXBlID0gImdyZWVuIn0sIC0tIFN0ZWFsdGggV2FyZAoJCQl7ZHVyYXRpb24gPSA2MCwgaWQgPSAyNjM3OTY4ODEsIG5hbWUgPSAiU2lnaHRXYXJkIiwgY2hhck5hbWUgPSAiWWVsbG93VHJpbmtldCIsIGNvbG9yID0gQVJHQigyNTUsIDAsIDI1NSwgMCksIHR5cGUgPSAiZ3JlZW4ifSwgLS0gV2FyZGluZyBUb3RlbSAoVHJpbmtldCkKCQkJe2R1cmF0aW9uID0gMTIwLCBpZCA9IDI2Mzc5Njg4MiwgbmFtZSA9ICJTaWdodFdhcmQiLCBjaGFyTmFtZSA9ICJZZWxsb3dUcmlua2V0VXBncmFkZSIsIGNvbG9yID0gQVJHQigyNTUsIDAsIDI1NSwgMCksIHR5cGUgPSAiZ3JlZW4ifSwgLS0gV2FyZGluZyBUb3RlbSAoVHJpbmtldCkgKEx2bC45KQoJCQl7ZHVyYXRpb24gPSAxODAsIGlkID0gMjYzNzk2ODgyLCBuYW1lID0gIlNpZ2h0V2FyZCIsIGNoYXJOYW1lID0gIlNpZ2h0V2FyZCIsIGNvbG9yID0gQVJHQigyNTUsIDAsIDI1NSwgMCksIHR5cGUgPSAiZ3JlZW4ifSwgLS0gR3JlYXRlciBTdGVhbHRoIFRvdGVtIChUcmlua2V0KQoJCQl7ZHVyYXRpb24gPSAyNTAwMCwgaWQgPSAxOTQyMTgzMzgsIG5hbWUgPSAiVmlzaW9uV2FyZCIsIGNoYXJOYW1lID0gIlZpc2lvbldhcmQiLCBjb2xvciA9IEFSR0IoMjU1LCAyNTUsIDAsIDI1NSksIHR5cGUgPSAicGluayJ9LCAtLSBHcmVhdGVyIFZpc2lvbiBUb3RlbSAoVHJpbmtldCkKCQkJe2R1cmF0aW9uID0gMTgwLCBpZCA9IDE3Nzc1MTU1OCwgbmFtZSA9ICJTaWdodFdhcmQiLCBjaGFyTmFtZSA9ICJTaWdodFdhcmQiLCBjb2xvciA9IEFSR0IoMjU1LCAwLCAyNTUsIDApLCB0eXBlID0gImdyZWVuIn0sIC0tIFdyaWdnbGUncyBMYW50ZXJuCgkJCXtkdXJhdGlvbiA9IDE4MCwgaWQgPSAxMzU2MDk0NTQsIG5hbWUgPSAiU2lnaHRXYXJkIiwgY2hhck5hbWUgPSAiU2lnaHRXYXJkIiwgY29sb3IgPSBBUkdCKDI1NSwgMCwgMjU1LCAwKSwgdHlwZSA9ICJncmVlbiJ9LCAtLSBRdWlsbCBDb2F0CgkJCXtkdXJhdGlvbiA9IDE4MCwgaWQgPSAxMDExODA3MDgsIG5hbWUgPSAiVmlzaW9uV2FyZCIsIGNoYXJOYW1lID0gIlNpZ2h0V2FyZCIsIGNvbG9yID0gQVJHQigyNTUsIDAsIDI1NSwgMCksIHR5cGUgPSAiZ3JlZW4ifSwgLS0gR2hvc3QgV2FyZAoJCX0sCgkJc3ByaXRlcyA9IHsKCQkJR3JlZW5XYXJkID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcbWluaW1hcFxcTWluaW1hcF9XYXJkX0dyZWVuX0VuZW15LnRnYSIpIGFuZCBjcmVhdGVTcHJpdGUoIm15VmlzaW9uXFxtaW5pbWFwXFxNaW5pbWFwX1dhcmRfR3JlZW5fRW5lbXkudGdhIiksCgkJCVBpbmtXYXJkID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcbWluaW1hcFxcTWluaW1hcF9XYXJkX1BpbmtfRW5lbXkudGdhIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXG1pbmltYXBcXE1pbmltYXBfV2FyZF9QaW5rX0VuZW15LnRnYSIpLAoJCX0sCgkJb2JqZWN0cyA9IHt9Cgl9CgoJQWRkUmVjdlBhY2tldENhbGxiYWNrKGZ1bmN0aW9uKHApIHNlbGY6T25SZWN2UGFja2V0KHApIGVuZCkKCUFkZERlbGV0ZU9iakNhbGxiYWNrKGZ1bmN0aW9uKG9iamVjdCkgc2VsZjpPbkRlbGV0ZU9iaihvYmplY3QpIGVuZCkKCUFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6T25EcmF3KCkgZW5kKQoKCWlmIHNlbGYuaGlkZGVuT2JqZWN0cy5zcHJpdGVzLkdyZWVuV2FyZCB0aGVuCgkJQWRkVW5sb2FkQ2FsbGJhY2soZnVuY3Rpb24oKQoJCQlpZiBzZWxmLmhpZGRlbk9iamVjdHMuc3ByaXRlcy5HcmVlbldhcmQgdGhlbgoJCQkJc2VsZi5oaWRkZW5PYmplY3RzLnNwcml0ZXMuR3JlZW5XYXJkOlJlbGVhc2UoKQoJCQllbmQKCQllbmQpCgllbmQKCWlmIHNlbGYuaGlkZGVuT2JqZWN0cy5zcHJpdGVzLlBpbmtXYXJkIHRoZW4KCQlBZGRVbmxvYWRDYWxsYmFjayhmdW5jdGlvbigpCgkJCWlmIHNlbGYuaGlkZGVuT2JqZWN0cy5zcHJpdGVzLlBpbmtXYXJkIHRoZW4KCQkJCXNlbGYuaGlkZGVuT2JqZWN0cy5zcHJpdGVzLlBpbmtXYXJkOlJlbGVhc2UoKQoJCQllbmQKCQllbmQpCgllbmQKZW5kCgpmdW5jdGlvbiBoaWRkZW5PYmplY3RzOk9uUmVjdlBhY2tldChwKQoJaWYgcC5oZWFkZXIgPT0gMHhCNSB0aGVuCgkJcC5wb3MgPSAxCgkJbG9jYWwgY2FzdGVyID0gb2JqTWFuYWdlcjpHZXRPYmplY3RCeU5ldHdvcmtJZChwOkRlY29kZUYoKSkKCQlpZiBjYXN0ZXIgdGhlbgoJCQlwLnBvcyA9IDEyCgkJCWxvY2FsIGlkID0gcDpEZWNvZGU0KCkKCQkJcC5wb3MgPSAzNwoJCQlsb2NhbCBwcm9qZWN0aWxlSWQgPSBwOkRlY29kZTQoKQoJCQlwLnBvcyA9IDUzCgkJCWxvY2FsIGVuZFBvcyA9IFZlY3RvcihwOkRlY29kZUYoKSwgcDpEZWNvZGVGKCksIHA6RGVjb2RlRigpKQoKCQkJZm9yIF8sIG1ldGEgaW4gcGFpcnMoc2VsZi5oaWRkZW5PYmplY3RzLm1ldGEpIGRvCgkJCQlpZiBpZCA9PSBtZXRhLmlkIHRoZW4KCQkJCQlyZXR1cm4gdGFibGUuaW5zZXJ0KHNlbGYuaGlkZGVuT2JqZWN0cy5vYmplY3RzLCB7c3RhcnRUID0gR2V0SW5HYW1lVGltZXIoKSwgcG9zID0gZW5kUG9zLCBuZXR3b3JrSUQgPSBEd29yZFRvRmxvYXQoQWRkTnVtKHByb2plY3RpbGVJZCwgMikpLCBjcmVhdG9yID0gY2FzdGVyLCBtZXRhID0gbWV0YX0pCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbHNlaWYgcC5oZWFkZXIgPT0gMHgwNyB0aGVuCgkJcC5wb3MgPSAxCgkJbG9jYWwgb2JqZWN0TmV0d29ya0lkID0gcDpEZWNvZGVGKCkKCQlsb2NhbCBjcmVhdG9yTmV0d29ya0lkID0gcDpEZWNvZGVGKCkKCgkJRGVsYXlBY3Rpb24oZnVuY3Rpb24oKQoJCQlsb2NhbCBvYmplY3QgPSBvYmpNYW5hZ2VyOkdldE9iamVjdEJ5TmV0d29ya0lkKG9iamVjdE5ldHdvcmtJZCkKCQkJbG9jYWwgY3JlYXRvciA9IG9iak1hbmFnZXI6R2V0T2JqZWN0QnlOZXR3b3JrSWQoY3JlYXRvck5ldHdvcmtJZCkKCgkJCWlmIG9iamVjdCB0aGVuCgkJCQlsb2NhbCBwb3MgPSBWZWN0b3Iob2JqZWN0LngsIG9iamVjdC55LCBvYmplY3QueikKCgkJCQlmb3IgaSwgb2JqIGluIHBhaXJzKHNlbGYuaGlkZGVuT2JqZWN0cy5vYmplY3RzKSBkbyAtLSBDaGVjayBpZiB0aGUgb2JqZWN0IGFscmVhZHkgZXhpc3RzCgkJCQkJaWYgb2JqLm5ldHdvcmtJRCA9PSBvYmplY3QubmV0d29ya0lEIHRoZW4KCQkJCQkJb2JqLnBvcyA9IHBvcyAtLSBVcGRhdGUgdGhlIG9iamVjdHMgcG9zaXRpb24KCQkJCQkJcmV0dXJuCgkJCQkJZW5kCgkJCQllbmQKCgkJCQlmb3IgXywgbWV0YSBpbiBwYWlycyhzZWxmLmhpZGRlbk9iamVjdHMubWV0YSkgZG8gLS0gRmluZCB0aGUgb2JqZWN0J3MgbWV0YSBkYXRhCgkJCQkJaWYgbWV0YS5uYW1lID09IG9iamVjdC5uYW1lIGFuZCBtZXRhLmNoYXJOYW1lID09IG9iamVjdC5jaGFyTmFtZSB0aGVuCgkJCQkJCXJldHVybiB0YWJsZS5pbnNlcnQoc2VsZi5oaWRkZW5PYmplY3RzLm9iamVjdHMsIHtzdGFydFQgPSBHZXRJbkdhbWVUaW1lcigpLCBwb3MgPSBwb3MsIG5ldHdvcmtJRCA9IG9iamVjdC5uZXR3b3JrSUQsIGNyZWF0b3IgPSBjcmVhdG9yLCBtZXRhID0gbWV0YX0pCgkJCQkJZW5kCgkJCQllbmQKCQkJZWxzZWlmIENvbmZpZy5oaWRkZW5PYmplY3RzLm5vdGlmeUZPVyB0aGVuCgkJCQlQcmludENoYXQoY3JlYXRvci5jaGFyTmFtZSAuLiAiIGhhcyBwbGFudGVkIGEgd2FyZCIpCgkJCWVuZAoJCWVuZCwgMi41KQoJZWxzZWlmIHAuaGVhZGVyID09IDB4MzIgdGhlbgoJCXAucG9zID0gMQoJCWxvY2FsIG5ldHdvcmtJRCA9IHA6RGVjb2RlRigpCgkJZm9yIGksIG9iaiBpbiBpcGFpcnMoc2VsZi5oaWRkZW5PYmplY3RzLm9iamVjdHMpIGRvCgkJCWlmIG9iai5uZXR3b3JrSUQgYW5kIG9iai5uZXR3b3JrSUQgPT0gbmV0d29ya0lEIHRoZW4KCQkJCXRhYmxlLnJlbW92ZShzZWxmLmhpZGRlbk9iamVjdHMub2JqZWN0cywgaSkKCQkJCWJyZWFrCgkJCWVuZAoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gaGlkZGVuT2JqZWN0czpPbkRlbGV0ZU9iaihvYmplY3QpCglpZiBvYmplY3QgYW5kIG9iamVjdC52YWxpZCBhbmQgb2JqZWN0Lm5hbWU6ZmluZCgiV2FyZCIpIHRoZW4KCQlmb3IgaSwgb2JqIGluIGlwYWlycyhzZWxmLmhpZGRlbk9iamVjdHMub2JqZWN0cykgZG8KCQkJaWYgb2JqZWN0Lm5ldHdvcmtJRCA9PSBvYmoubmV0d29ya0lEIG9yIEdldERpc3RhbmNlKG9iamVjdCwgb2JqLnBvcykgPCAxIHRoZW4gLS0gVXN1YWxseSB0aGUgb2JqZWN0IGlzIGRlbGV0ZWQgYmVmb3JlIHdlIGNhbiBnZXQgdGhlIG5ldHdvcmtJRAoJCQkJdGFibGUucmVtb3ZlKHNlbGYuaGlkZGVuT2JqZWN0cy5vYmplY3RzLCBpKQoJCQkJcmV0dXJuCgkJCWVuZAoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gaGlkZGVuT2JqZWN0czpPbkRyYXcoKQoJZm9yIGksIG9iaiBpbiBwYWlycyhzZWxmLmhpZGRlbk9iamVjdHMub2JqZWN0cykgZG8KCQlpZiBvYmouY3JlYXRvciA9PSBuaWwgb3IgKG9iai5jcmVhdG9yLnRlYW0gfj0gVEVBTV9FTkVNWSBhbmQgQ29uZmlnLmhpZGRlbk9iamVjdHMuZHJhd0FsbHkgb3Igb2JqLmNyZWF0b3IudGVhbSA9PSBURUFNX0VORU1ZIGFuZCBDb25maWcuaGlkZGVuT2JqZWN0cy5kcmF3QXhpcykgdGhlbgoJCQlpZiBHZXRJbkdhbWVUaW1lcigpID4gb2JqLnN0YXJ0VCArIG9iai5tZXRhLmR1cmF0aW9uIHRoZW4KCQkJCXJldHVybiB0YWJsZS5yZW1vdmUoc2VsZi5oaWRkZW5PYmplY3RzLm9iamVjdHMsIGkpCgkJCWVuZAoKCQkJaWYgQ29uZmlnLmhpZGRlbk9iamVjdHMuZHJhd01pbmltYXAgYW5kIG9iai5jcmVhdG9yLnRlYW0gPT0gVEVBTV9FTkVNWSB0aGVuCgkJCQlpZiBvYmoubWV0YS50eXBlID09ICJncmVlbiIgdGhlbgoJCQkJCWlmIHNlbGYuaGlkZGVuT2JqZWN0cy5zcHJpdGVzLkdyZWVuV2FyZCB0aGVuCgkJCQkJCXNlbGYuaGlkZGVuT2JqZWN0cy5zcHJpdGVzLkdyZWVuV2FyZDpEcmF3KEdldE1pbmltYXBYKG9iai5wb3MueC0xMjgpLCBHZXRNaW5pbWFwWShvYmoucG9zLnorMTI4KSwgMjU1KQoJCQkJCWVsc2UKCQkJCQkJRHJhd1JlY3RhbmdsZShHZXRNaW5pbWFwWChvYmoucG9zLngtMTI4KSwgR2V0TWluaW1hcFkob2JqLnBvcy56KzEyOCksIDUsIDUsIEFSR0IoMjU1LCAwLCAyNTUsIDApKQoJCQkJCWVuZAoJCQkJZWxzZWlmIG9iai5tZXRhLnR5cGUgPT0gInBpbmsiIHRoZW4KCQkJCQlpZiBzZWxmLmhpZGRlbk9iamVjdHMuc3ByaXRlcy5QaW5rV2FyZCB0aGVuCgkJCQkJCXNlbGYuaGlkZGVuT2JqZWN0cy5zcHJpdGVzLlBpbmtXYXJkOkRyYXcoR2V0TWluaW1hcFgob2JqLnBvcy54LTEyOCksIEdldE1pbmltYXBZKG9iai5wb3MueisxMjgpLCAyNTUpCgkJCQkJZWxzZQoJCQkJCQlEcmF3UmVjdGFuZ2xlKEdldE1pbmltYXBYKG9iai5wb3MueC0xMjgpLCBHZXRNaW5pbWFwWShvYmoucG9zLnorMTI4KSwgNSwgNSwgQVJHQigyNTUsIDI1NSwgMCwgMjU1KSkKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCgkJCWlmIENvbmZpZy5oaWRkZW5PYmplY3RzLnVzZUxGQyB0aGVuCgkJCQlEcmF3TEZDKG9iai5wb3MueCwgb2JqLnBvcy55LCBvYmoucG9zLnosIDc1LCBvYmoubWV0YS5jb2xvciwgMTApCgkJCWVsc2UKCQkJCURyYXdDaXJjbGUob2JqLnBvcy54LCBvYmoucG9zLnksIG9iai5wb3MueiwgMTAwLCBvYmoubWV0YS5jb2xvcikKCQkJZW5kCgoJCQlsb2NhbCB0ZXh0Q29sb3IgPSBvYmouY3JlYXRvci50ZWFtID09IFRFQU1fRU5FTVkgYW5kIEFSR0IoMjU1LCAyNTUsIDE4MiwgMTkzKSBvciBBUkdCKDI1NSwgMTc2LCAyMjYsIDI1NSkKCQkJbG9jYWwgdCA9IChvYmouc3RhcnRUICsgb2JqLm1ldGEuZHVyYXRpb24pIC0gR2V0SW5HYW1lVGltZXIoKQoJCQlpZiB0IDwgMTAwMDAgdGhlbgoJCQkJbG9jYWwgbSA9IG1hdGguZmxvb3IodC82MCkKCQkJCWxvY2FsIHMgPSBtYXRoLmNlaWwodCU2MCkKCQkJCXMgPSAoczwxMCBhbmQgIjAiLi5zKSBvciBzCgkJCQlEcmF3VGV4dDNEKG0uLiI6Ii4ucywgb2JqLnBvcy54LCBvYmoucG9zLnksIG9iai5wb3MueiwgMTYsIHRleHRDb2xvciwgdHJ1ZSkKCQkJZW5kCgkJCWlmIG9iai5jcmVhdG9yIH49IG5pbCB0aGVuCgkJCQlEcmF3VGV4dDNEKCJcbiIuLm9iai5jcmVhdG9yLmNoYXJOYW1lLCBvYmoucG9zLngsIG9iai5wb3MueSwgb2JqLnBvcy56LCAxNiwgdGV4dENvbG9yLCB0cnVlKQoJCQllbHNlCgkJCQlEcmF3VGV4dDNEKCJcbj8iLCBvYmoucG9zLngsIG9iai5wb3MueSwgb2JqLnBvcy56LCAxNiwgdGV4dENvbG9yLCB0cnVlKQoJCQllbmQKCQllbmQKCWVuZAplbmQKCmNsYXNzICJtaW5pbWFwVGltZXJzIgoKZnVuY3Rpb24gbWluaW1hcFRpbWVyczpNb3VzZU9uTWluaW1hcCgpCglyZXR1cm4gQ3Vyc29ySXNVbmRlcihHZXRNaW5pbWFwWCgwKSwgR2V0TWluaW1hcFkoMTQ1MjcpLCBXSU5ET1dfVyAtIEdldE1pbmltYXBYKDApLCBXSU5ET1dfSCAtIEdldE1pbmltYXBZKDE0NTI3KSkKZW5kCgpmdW5jdGlvbiBtaW5pbWFwVGltZXJzOl9faW5pdCgpCglpZiBtYXBJbmRleCA9PSAxIHRoZW4gLS0gIFN1bW1vbmVycyBSaWZ0CgkJc2VsZi5qdW5nbGUgPSB7CgkJCXtuYW1lID0gImIiLCB0ZWFtID0gVEVBTV9CTFVFLCBzcGF3blRpbWUgPSA2MCs1NSwgcmVzcGF3blRpbWUgPSA1KjYwLCBwb3NpdGlvbiA9IHt4ID0gMzYwOCwgeSA9IDc4MDB9fSwgLS0gQm90dG9tIEJsdWUKCQkJe25hbWUgPSAid29sdmVzIiwgdGVhbSA9IFRFQU1fQkxVRSwgc3Bhd25UaW1lID0gMio2MCs1LCByZXNwYXduVGltZSA9IDUwLCBwb3NpdGlvbiA9IHt4ID0gMzM0NCwgeSA9IDY0NzJ9fSwgLS0gQm90dG9tIFdvbHZlcwoJCQl7bmFtZSA9ICJ3cmFpdGhzIiwgdGVhbSA9IFRFQU1fQkxVRSwgc3Bhd25UaW1lID0gMio2MCs1LCByZXNwYXduVGltZSA9IDUwLCBwb3NpdGlvbiA9IHt4ID0gNjI0MCwgeSA9IDU0MTB9fSwgLS0gQm90dG9tIFdyYWl0aHMKCQkJe25hbWUgPSAiciIsIHRlYW0gPSBURUFNX0JMVUUsIHNwYXduVGltZSA9IDYwKzU1LCByZXNwYXduVGltZSA9IDUqNjAsIHBvc2l0aW9uID0ge3ggPSA3NDI1LCB5ID0gNDIxNX19LCAtLSBCb3R0b20gUmVkCgkJCXtuYW1lID0gImdvbGVtcyIsIHRlYW0gPSBURUFNX0JMVUUsIHNwYXduVGltZSA9IDIqNjArNSwgcmVzcGF3blRpbWUgPSA1MCwgcG9zaXRpb24gPSB7eCA9IDc4ODYsIHkgPSAyNjg4fX0sIC0tIEJvdHRvbSBHb2xlbXMKCQkJe25hbWUgPSAiZCIsIHRlYW0gPSBURUFNX05FVVRSQUwsIHNwYXduVGltZSA9IDIqNjArMzAsIHJlc3Bhd25UaW1lID0gNio2MCwgcG9zaXRpb24gPSB7eCA9IDk0NjUsIHkgPSA0MzQ4fX0sIC0tIERyYWdvbgoJCQl7bmFtZSA9ICJiIiwgdGVhbSA9IFRFQU1fUkVELCBzcGF3blRpbWUgPSA2MCs1NSwgcmVzcGF3blRpbWUgPSA1KjYwLCBwb3NpdGlvbiA9IHt4ID0gMTAzMjEsIHkgPSA3MDcwfX0sIC0tIFRvcCBCbHVlCgkJCXtuYW1lID0gIndvbHZlcyIsIHRlYW0gPSBURUFNX1JFRCwgc3Bhd25UaW1lID0gMio2MCs1LCByZXNwYXduVGltZSA9IDUwLCBwb3NpdGlvbiA9IHt4ID0gMTA2MjUsIHkgPSA4NjIwfX0sIC0tIFRvcCBXb2x2ZXMKCQkJe25hbWUgPSAid3JhaXRocyIsIHRlYW0gPSBURUFNX1JFRCwgc3Bhd25UaW1lID0gMio2MCs1LCByZXNwYXduVGltZSA9IDUwLCBwb3NpdGlvbiA9IHt4ID0gNzUwMiwgeSA9IDk4MjB9fSwgLS0gVG9wIFdyYWl0aHMKCQkJe25hbWUgPSAiciIsIHRlYW0gPSBURUFNX1JFRCwgc3Bhd25UaW1lID0gNjArNTUsIHJlc3Bhd25UaW1lID0gNSo2MCwgcG9zaXRpb24gPSB7eCA9IDY0MjksIHkgPSAxMTA4NX19LCAtLSBUb3AgUmVkCgkJCXtuYW1lID0gImdvbGVtcyIsIHRlYW0gPSBURUFNX1JFRCwgc3Bhd25UaW1lID0gMio2MCs1LCByZXNwYXduVGltZSA9IDUwLCBwb3NpdGlvbiA9IHt4ID0gNTcwMCwgeSA9IDEyNDQ5fX0sIC0tIFRvcCBHb2xlbXMKCQkJe25hbWUgPSAiYiIsIHRlYW0gPSBURUFNX05FVVRSQUwsIHNwYXduVGltZSA9IDE1KjYwLCByZXNwYXduVGltZSA9IDcqNjAsIHBvc2l0aW9uID0ge3ggPSA0NTQyLCB5ID0gMTA3NzF9fSwgLS0gQmFyb24KCQkJe25hbWUgPSAid2lnaHQiLCB0ZWFtID0gVEVBTV9CTFVFLCBzcGF3blRpbWUgPSAyKjYwKzUsIHJlc3Bhd25UaW1lID0gNTAsIHBvc2l0aW9uID0ge3ggPSAxNTE4LCB5ID0gODczMH19LCAtLSBCb3R0b20gV2lnaHQKCQkJe25hbWUgPSAid2lnaHQiLCB0ZWFtID0gVEVBTV9SRUQsIHNwYXduVGltZSA9IDIqNjArNSwgcmVzcGF3blRpbWUgPSA1MCwgcG9zaXRpb24gPSB7eCA9IDEyMzU3LCB5ID0gNjc2Mn19LCAgLS0gVG9wIFdpZ2h0CgkJfQoJZWxzZWlmIG1hcEluZGV4ID09IDggdGhlbiAtLSBDcnlzdGFsIFNjYXIKCQlzZWxmLmp1bmdsZSA9IHsKCQkJe25hbWUgPSAiSGVhbCIsIHNwYXduVGltZSA9IDIqNjAsIHJlc3Bhd25UaW1lID0gMzAsIHBvc2l0aW9uID0ge3g9NDc1NSwgeT05NDIxfX0sIC0tIDEKCQkJe25hbWUgPSAiSGVhbCIsIHNwYXduVGltZSA9IDIqNjAsIHJlc3Bhd25UaW1lID0gMzAsIHBvc2l0aW9uID0ge3g9ODc1MywgeT05NDE0fX0sIC0tIDIKCQkJe25hbWUgPSAidW5kZWZpbmVkIiwgc3Bhd25UaW1lID0gMCwgcmVzcGF3blRpbWUgPSAwLCBwb3NpdGlvbiA9IHt4PTAsIHk9MH19LCAtLSAzCgkJCXtuYW1lID0gInVuZGVmaW5lZCIsIHNwYXduVGltZSA9IDAsIHJlc3Bhd25UaW1lID0gMCwgcG9zaXRpb24gPSB7eD0wLCB5PTB9fSwgLS0gNAoJCQl7bmFtZSA9ICJ1bmRlZmluZWQiLCBzcGF3blRpbWUgPSAwLCByZXNwYXduVGltZSA9IDAsIHBvc2l0aW9uID0ge3g9MCwgeT0wfX0sIC0tIDUKCQkJe25hbWUgPSAiSGVhbCIsIHNwYXduVGltZSA9IDIqNjAsIHJlc3Bhd25UaW1lID0gMzAsIHBvc2l0aW9uID0ge3g9MTAwNTIsIHk9MTY5Mn19LCAtLSA2CgkJCXtuYW1lID0gIkhlYWwiLCBzcGF3blRpbWUgPSAyKjYwLCByZXNwYXduVGltZSA9IDMwLCBwb3NpdGlvbiA9IHt4PTM0NjUsIHk9MTY5Mn19LCAtLSA3CgkJCXtuYW1lID0gIkhlYWwiLCBzcGF3blRpbWUgPSAyKjYwLCByZXNwYXduVGltZSA9IDMwLCBwb3NpdGlvbiA9IHt4PTg2NCwgeT04MzY5fX0sIC0tIDgKCQkJe25hbWUgPSAiSGVhbCIsIHNwYXduVGltZSA9IDIqNjAsIHJlc3Bhd25UaW1lID0gMzAsIHBvc2l0aW9uID0ge3g9Njc1MCwgeT0xMjIwNH19LCAtLSA5CgkJCXtuYW1lID0gIkhlYWwiLCBzcGF3blRpbWUgPSAyKjYwLCByZXNwYXduVGltZSA9IDMwLCBwb3NpdGlvbiA9IHt4PTEyNzU1LCB5PTg0MDZ9fSwgLS0gMTAKCQkJe25hbWUgPSAiSGVhbCIsIHNwYXduVGltZSA9IDIqNjAsIHJlc3Bhd25UaW1lID0gMzAsIHBvc2l0aW9uID0ge3g9NDExOCwgeT01Nzk2fX0sIC0tIDExCgkJCXtuYW1lID0gIkhlYWwiLCBzcGF3blRpbWUgPSAyKjYwLCByZXNwYXduVGltZSA9IDMwLCBwb3NpdGlvbiA9IHt4PTkzMTYsIHk9NTY1MH19LCAtLSAxMgoJCQl7bmFtZSA9ICJIZWFsIiwgc3Bhd25UaW1lID0gMio2MCwgcmVzcGF3blRpbWUgPSAzMCwgcG9zaXRpb24gPSB7eD02NzUwLCB5PTMwMzV9fSwgLS0gMTMKCQl9CgllbHNlaWYgbWFwSW5kZXggPT0gMTAgdGhlbiAtLSAgVHdpc3RlZCBUcmVlbGluZQoJCXNlbGYuanVuZ2xlID0gewoJCQl7bmFtZSA9ICJ3cmFpdGhzIiwgdGVhbSA9IFRFQU1fQkxVRSwgc3Bhd25UaW1lID0gNjArNDAsIHJlc3Bhd25UaW1lID0gNTAsIHBvc2l0aW9uID0ge3ggPSA0MzE5LCB5ID0gNjAxOX19LCAtLSBMZWZ0IFdyYWl0aHMKCQkJe25hbWUgPSAiZ29sZW1zIiwgdGVhbSA9IFRFQU1fQkxVRSwgc3Bhd25UaW1lID0gNjArNDAsIHJlc3Bhd25UaW1lID0gNTAsIHBvc2l0aW9uID0ge3ggPSA1MDg2LCB5ID0gODMyOX19LCAgLS0gTGVmdCBHb2xlbXMKCQkJe25hbWUgPSAid29sdmVzIiwgdGVhbSA9IFRFQU1fQkxVRSwgc3Bhd25UaW1lID0gNjArNDAsIHJlc3Bhd25UaW1lID0gNTAsIHBvc2l0aW9uID0ge3ggPSA2MTMxLCB5ID0gNjE1OX19LCAgLS0gTGVmdCBXb2x2ZXMKCQkJe25hbWUgPSAid3JhaXRocyIsIHRlYW0gPSBURUFNX1JFRCwgc3Bhd25UaW1lID0gNjArNDAsIHJlc3Bhd25UaW1lID0gNTAsIHBvc2l0aW9uID0ge3ggPSAxMDkzOSwgeSA9IDYwMTl9fSwgLS0gUmlnaHQgV3JhaXRocwoJCQl7bmFtZSA9ICJnb2xlbXMiLCB0ZWFtID0gVEVBTV9SRUQsIHNwYXduVGltZSA9IDYwKzQwLCByZXNwYXduVGltZSA9IDUwLCBwb3NpdGlvbiA9IHt4ID0gMTAzMTIsIHkgPSA4MzI5fX0sICAtLSBSaWdodCBHb2xlbXMKCQkJe25hbWUgPSAid29sdmVzIiwgdGVhbSA9IFRFQU1fUkVELCBzcGF3blRpbWUgPSA2MCs0MCwgcmVzcGF3blRpbWUgPSA1MCwgcG9zaXRpb24gPSB7eCA9IDkxOTcsIHkgPSA2MTU5fX0sICAtLSBSaWdodCBXb2x2ZXMKCQkJe25hbWUgPSAiaGVhbCIsIHRlYW0gPSBURUFNX05FVVRSQUwsIHNwYXduVGltZSA9IDMqNjAsIHJlc3Bhd25UaW1lID0gNjArMzAsIHBvc2l0aW9uID0ge3ggPSA3NDQ2LCB5ID0gNzIwNn19LCAtLSBIZWFsCgkJCXtuYW1lID0gInYiLCB0ZWFtID0gVEVBTV9ORVVUUkFMLCBzcGF3blRpbWUgPSAxMCo2MCwgcmVzcGF3blRpbWUgPSA2MCo1LCBwb3NpdGlvbiA9IHt4ID0gNzY2NCwgeSA9IDEwMzU5fX0sIC0tIFZpbGVtYXcKCQl9CgllbHNlaWYgbWFwSW5kZXggPT0gMTIgdGhlbiAtLSBIb3dsaW5nIEFieXNzCgkJc2VsZi5qdW5nbGUgPSB7CgkJCXtuYW1lID0gIkhlYWwiLCBzcGF3blRpbWUgPSAzKjYwKzEwLCByZXNwYXduVGltZSA9IDQwLCBwb3NpdGlvbiA9IHt4PTc0MzEsIHk9NzAwNH19LAoJCQl7bmFtZSA9ICJIZWFsIiwgc3Bhd25UaW1lID0gMyo2MCsxMCwgcmVzcGF3blRpbWUgPSA0MCwgcG9zaXRpb24gPSB7eD01NzYwLCB5PTU0MTB9fSwKCQkJe25hbWUgPSAiSGVhbCIsIHNwYXduVGltZSA9IDMqNjArMTAsIHJlc3Bhd25UaW1lID0gNDAsIHBvc2l0aW9uID0ge3g9ODcyMywgeT04MTYwfX0sCgkJCXtuYW1lID0gIkhlYWwiLCBzcGF3blRpbWUgPSAzKjYwKzEwLCByZXNwYXduVGltZSA9IDQwLCBwb3NpdGlvbiA9IHt4PTQ2NjMsIHk9NDE0N319LAoJCX0KCWVsc2UKCQlQcmludEVycm9yKG1hcEluZGV4IC4uICJhIG5vdCBmb3VuZCBbbWluaW1hcFRpbWVyc10iKQoJCXJldHVybgoJZW5kCgoJQWRkUmVjdlBhY2tldENhbGxiYWNrKGZ1bmN0aW9uKHApIHNlbGY6T25SZWN2UGFja2V0KHApIGVuZCkKCUFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6T25EcmF3KCkgZW5kKQoJaWYgbWFwSW5kZXggPT0gMSBvciBtYXBJbmRleCA9PSAxMCB0aGVuCgkJQWRkTXNnQ2FsbGJhY2soZnVuY3Rpb24obXNnLCB3UGFyYW0pIHNlbGY6T25XbmRNc2cobXNnLCB3UGFyYW0pIGVuZCkKCWVuZAplbmQKCmZ1bmN0aW9uIG1pbmltYXBUaW1lcnM6T25SZWN2UGFja2V0KHApCglpZiBwLmhlYWRlciA9PSAxOTUgdGhlbgoJCXAucG9zID0gOQoJCWxvY2FsIGNhbXBJRCA9IG1hcEluZGV4IH49IDggYW5kIHA6RGVjb2RlNCgpIG9yIHA6RGVjb2RlNCgpIC0gOTkKCQlpZiBzZWxmLmp1bmdsZVtjYW1wSURdIH49IG5pbCB0aGVuCgkJCXNlbGYuanVuZ2xlW2NhbXBJRF0uc3Bhd25UaW1lID0gR2V0SW5HYW1lVGltZXIoKStzZWxmLmp1bmdsZVtjYW1wSURdLnJlc3Bhd25UaW1lCgkJZWxzZQoJCQlQcmludEVycm9yKCJjYW1wSUQgIiAuLiBjYW1wSUQgLi4gIiBub3QgZm91bmQuIikKCQllbmQKCWVsc2VpZiBwLmhlYWRlciA9PSAyMzMgdGhlbgoJCXAucG9zID0gMjEKCQlsb2NhbCBjYW1wSUQgPSBtYXBJbmRleCB+PSA4IGFuZCBwOkRlY29kZTEoKSBvciBwOkRlY29kZTEoKSAtIDk5CgkJaWYgc2VsZi5qdW5nbGVbY2FtcElEXSB+PSBuaWwgdGhlbgoJCQlzZWxmLmp1bmdsZVtjYW1wSURdLnNwYXduVGltZSA9IEdldEluR2FtZVRpbWVyKCktc2VsZi5qdW5nbGVbY2FtcElEXS5yZXNwYXduVGltZQoJCWVsc2UKCQkJUHJpbnRFcnJvcigiY2FtcElEICIgLi4gY2FtcElEIC4uICIgbm90IGZvdW5kLiIpCgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiBtaW5pbWFwVGltZXJzOk9uV25kTXNnKG1zZywgd1BhcmFtKQoJaWYgbXNnID09IFdNX0xCVVRUT05ET1dOIGFuZCBDb25maWcubWluaW1hcFRpbWVycy5zZW5kQ2hhdEtleSBhbmQgc2VsZjpNb3VzZU9uTWluaW1hcCgpIHRoZW4KCQlmb3IgaSwgY2FtcCBpbiBpcGFpcnMoc2VsZi5qdW5nbGUpIGRvCgkJCWlmIEdldERpc3RhbmNlKG1vdXNlUG9zLCBjYW1wLnBvc2l0aW9uKSA8IDEwMDAgYW5kIEdldEluR2FtZVRpbWVyKCkgPCBjYW1wLnNwYXduVGltZSB0aGVuCgkJCQlsb2NhbCBjYW1wTmFtZSA9IChjYW1wLnRlYW0gPT0gVEVBTV9FTkVNWSBhbmQgInQiIG9yIGNhbXAudGVhbSB+PSBURUFNX05FVVRSQUwgYW5kICJvIiBvciAiIikgLi4gY2FtcC5uYW1lCgkJCQlsb2NhbCBtID0gbWF0aC5mbG9vcihjYW1wLnNwYXduVGltZSAvIDYwKQoJCQkJbG9jYWwgcyA9IG1hdGguY2VpbCAoY2FtcC5zcGF3blRpbWUgJSA2MCkKCQkJCWxvY2FsIHNwYXduVGltZSA9IG0gLi4gKHMgPiAxMCBhbmQgcyBvciBzIC4uIDApIC4uICIgIgoJCQkJU2VuZENoYXQoc3Bhd25UaW1lIC4uIGNhbXBOYW1lKQoJCQkJcmV0dXJuCgkJCWVuZAoJCWVuZAoJZW5kCmVuZAoKZnVuY3Rpb24gbWluaW1hcFRpbWVyczpPbkRyYXcoKQoJaWYgQ29uZmlnLm1pbmltYXBUaW1lcnMuaG90a2V5IHRoZW4KCQlmb3IgaSwgY2FtcCBpbiBpcGFpcnMoc2VsZi5qdW5nbGUpIGRvCgkJCWlmIEdldERpc3RhbmNlKG1vdXNlUG9zLCBjYW1wLnBvc2l0aW9uKSA8IDEwMDAgdGhlbgoKCQkJCWxvY2FsIHAgPSBDTG9MUGFja2V0KDE5NSkKCQkJCXA6RW5jb2RlNCgwKQoJCQkJcDpFbmNvZGVGKG15SGVyby5uZXR3b3JrSUQpCgkJCQlwOkVuY29kZTQoaSkKCQkJCXA6RW5jb2RlMSgzKQoJCQkJUmVjdlBhY2tldChwKQoKCQkJCXNlbGYuanVuZ2xlW2ldLnNwYXduVGltZSA9IEdldEluR2FtZVRpbWVyKCkrc2VsZi5qdW5nbGVbaV0ucmVzcGF3blRpbWUKCQkJCXJldHVybgoJCQllbmQKCQllbmQKCWVuZAoKCWlmIENvbmZpZy5taW5pbWFwVGltZXJzLmVuYWJsZWQgdGhlbgoJCWZvciBpLCBjYW1wIGluIGlwYWlycyhzZWxmLmp1bmdsZSkgZG8KCQkJaWYgR2V0SW5HYW1lVGltZXIoKSA8IGNhbXAuc3Bhd25UaW1lIHRoZW4KCQkJCWxvY2FsIHQgPSBjYW1wLnNwYXduVGltZS1HZXRJbkdhbWVUaW1lcigpCgkJCQlsb2NhbCBtID0gbWF0aC5mbG9vcih0LzYwKQoJCQkJbG9jYWwgcyA9IG1hdGguY2VpbCh0JTYwKQoJCQkJcyA9IChzPDEwIGFuZCAiMCIuLnMpIG9yIHMKCQkJCURyYXdUZXh0KG0uLiI6Ii4ucywgQ29uZmlnLm1pbmltYXBUaW1lcnMudGV4dFNpemUsIEdldE1pbmltYXBYKGNhbXAucG9zaXRpb24ueCksIEdldE1pbmltYXBZKGNhbXAucG9zaXRpb24ueSksIEFSR0IoQ29uZmlnLm1pbmltYXBUaW1lcnMudGV4dENvbG9yWzFdLCBDb25maWcubWluaW1hcFRpbWVycy50ZXh0Q29sb3JbMl0sIENvbmZpZy5taW5pbWFwVGltZXJzLnRleHRDb2xvclszXSwgQ29uZmlnLm1pbmltYXBUaW1lcnMudGV4dENvbG9yWzRdKSkKCQkJZW5kCgkJZW5kCgllbmQKZW5kCgpjbGFzcyAib3ZlcmhlYWRIVUQiCgpmdW5jdGlvbiBvdmVyaGVhZEhVRDpfX2luaXQoKQoJc2VsZi5PSEZyYW1lID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcYWJpbGl0eUZyYW1lLnBuZyIpIGFuZCBjcmVhdGVTcHJpdGUoIm15VmlzaW9uXFxhYmlsaXR5RnJhbWUucG5nIikKCglzZWxmLnN1bW1vbmVyU3ByaXRlcyA9IHsKCQlzdW1tb25lcmNsYWlydm95YW5jZSA9IEZpbGVFeGlzdChTUFJJVEVfUEFUSCAuLiAibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJDbGFpcnZveWFuY2UucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJDbGFpcnZveWFuY2UucG5nIiksCgkJc3VtbW9uZXJiYXJyaWVyID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcc3BlbGxzXFxTdW1tb25lckJhcnJpZXIucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJCYXJyaWVyLnBuZyIpLAoJCXN1bW1vbmVyYm9vc3QgPSBGaWxlRXhpc3QoU1BSSVRFX1BBVEggLi4gIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVyQm9vc3QucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJCb29zdC5wbmciKSwKCQlzdW1tb25lcmRvdCA9IEZpbGVFeGlzdChTUFJJVEVfUEFUSCAuLiAibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJEb3QucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJEb3QucG5nIiksCgkJc3VtbW9uZXJleGhhdXN0ID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcc3BlbGxzXFxTdW1tb25lckV4aGF1c3QucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJFeGhhdXN0LnBuZyIpLAoJCXN1bW1vbmVyZmxhc2ggPSBGaWxlRXhpc3QoU1BSSVRFX1BBVEggLi4gIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVyRmxhc2gucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJGbGFzaC5wbmciKSwKCQlzdW1tb25lcmhhc3RlID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcc3BlbGxzXFxTdW1tb25lckhhc3RlLnBuZyIpIGFuZCBjcmVhdGVTcHJpdGUoIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVySGFzdGUucG5nIiksCgkJc3VtbW9uZXJoZWFsID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcc3BlbGxzXFxTdW1tb25lckhlYWwucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJIZWFsLnBuZyIpLAoJCXN1bW1vbmVybWFuYSA9IEZpbGVFeGlzdChTUFJJVEVfUEFUSCAuLiAibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJNYW5hLnBuZyIpIGFuZCBjcmVhdGVTcHJpdGUoIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVyTWFuYS5wbmciKSwKCQlzdW1tb25lcm9kaW5nYXJyaXNvbiA9IEZpbGVFeGlzdChTUFJJVEVfUEFUSCAuLiAibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJPZGluR2Fycmlzb24ucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJPZGluR2Fycmlzb24ucG5nIiksCgkJc3VtbW9uZXJyZXZpdmUgPSBGaWxlRXhpc3QoU1BSSVRFX1BBVEggLi4gIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVyUmV2aXZlLnBuZyIpIGFuZCBjcmVhdGVTcHJpdGUoIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVyUmV2aXZlLnBuZyIpLAoJCXN1bW1vbmVyc21pdGUgPSBGaWxlRXhpc3QoU1BSSVRFX1BBVEggLi4gIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVyU21pdGUucG5nIikgYW5kIGNyZWF0ZVNwcml0ZSgibXlWaXNpb25cXHNwZWxsc1xcU3VtbW9uZXJTbWl0ZS5wbmciKSwKCQlzdW1tb25lcnRlbGVwb3J0ID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcc3BlbGxzXFxTdW1tb25lclRlbGVwb3J0LnBuZyIpIGFuZCBjcmVhdGVTcHJpdGUoIm15VmlzaW9uXFxzcGVsbHNcXFN1bW1vbmVyVGVsZXBvcnQucG5nIiksCgl9CglzZWxmLnN1bW1vbmVyU3ByaXRlcy50ZWxlcG9ydGNhbmNlbCA9IHNlbGYuc3VtbW9uZXJTcHJpdGVzLlN1bW1vbmVyVGVsZXBvcnQKCglBZGREcmF3Q2FsbGJhY2soZnVuY3Rpb24oKSBzZWxmOk9uRHJhdygpIGVuZCkKCUFkZFVubG9hZENhbGxiYWNrKGZ1bmN0aW9uKCkgc2VsZjpPblVubG9hZCgpIGVuZCkKZW5kCgoKZnVuY3Rpb24gb3ZlcmhlYWRIVUQ6T25EcmF3KCkKCWZvciBpPTEsIGhlcm9NYW5hZ2VyLmlDb3VudCBkbwoJCWxvY2FsIGhlcm8gPSBoZXJvTWFuYWdlcjpHZXRIZXJvKGkpCgkJaWYgaGVybyBhbmQgaGVyby52YWxpZCBhbmQgbm90IGhlcm8uZGVhZCBhbmQgaGVyby52aXNpYmxlIGFuZCBub3QgaGVyby5pc01lIHRoZW4KCQkJbG9jYWwgYmFyUG9zID0gR2V0SFBCYXJQb3MoaGVybykKCQkJaWYgT25TY3JlZW4oYmFyUG9zLCBiYXJQb3MpIHRoZW4KCQkJCWlmIENvbmZpZy5vdmVyaGVhZEhVRC5kcmF3QWJpbGl0aWVzIHRoZW4KCQkJCQlpZiBzZWxmLk9IRnJhbWUgdGhlbgoJCQkJCQlzZWxmLk9IRnJhbWU6RHJhdyhiYXJQb3MueCwgYmFyUG9zLnkgKyAxOCwgMjU1KQoJCQkJCWVuZAoKCQkJCQlmb3Igc3BlbGxJZCA9IF9RLCBfUiBkbwoJCQkJCQlsb2NhbCBzcGVsbERhdGEgPSBoZXJvOkdldFNwZWxsRGF0YShzcGVsbElkKQoJCQkJCQlpZiBzcGVsbERhdGEubGV2ZWwgPiAwIHRoZW4KCQkJCQkJCWxvY2FsIHggPSBiYXJQb3MueCArIDMgKyAoc3BlbGxJZCAqIDI2KQoJCQkJCQkJbG9jYWwgeSA9IGJhclBvcy55ICsgMjAKCgkJCQkJCQlpZiBzcGVsbERhdGEuY3VycmVudENkID09IDAgYW5kIHNwZWxsRGF0YS50b2dnbGVTdGF0ZSB+PSAxIHRoZW4KCQkJCQkJCQlEcmF3UmVjdGFuZ2xlKHgsIHksIDI1LCAzLCAoc3BlbGxEYXRhLm1hbmEgYW5kIGhlcm8ubWFuYSA+IHNwZWxsRGF0YS5tYW5hKSBhbmQgQVJHQigyNTUsIDM1LCAxOTMsIDI2KSBvciBBUkdCKDI1NSwgNjUsIDEwNSwgMjI1KSkKCQkJCQkJCWVsc2VpZiBzcGVsbERhdGEudG9nZ2xlU3RhdGUgPT0gMSB0aGVuCgkJCQkJCQkJRHJhd1JlY3RhbmdsZSh4LCB5LCAyNSwgMywgQVJHQigyNTUsIDEyOCwgMCwgMCkpCgkJCQkJCQllbHNlCgkJCQkJCQkJbG9jYWwgd2lkdGggPSAoc3BlbGxEYXRhLnRvdGFsQ29vbGRvd24gLXNwZWxsRGF0YS5jdXJyZW50Q2QpIC8gc3BlbGxEYXRhLnRvdGFsQ29vbGRvd24gKiAyNQoJCQkJCQkJCURyYXdSZWN0YW5nbGUoeCwgeSwgMjUsIDMsIEFSR0IoMjU1LCAxMjgsIDAsIDApKQoJCQkJCQkJCURyYXdSZWN0YW5nbGUoeCwgeSwgd2lkdGgsIDMsIChzcGVsbERhdGEubWFuYSBhbmQgaGVyby5tYW5hID4gc3BlbGxEYXRhLm1hbmEpIGFuZCBBUkdCKDI1NSwgMzIsIDEyOCwgMzIpIG9yIEFSR0IoMjU1LCA2NSwgMTA1LCAyMjUpKQoJCQkJCQkJCWlmIENvbmZpZy5vdmVyaGVhZEhVRC5zaG93RGV0YWlscyB0aGVuCgkJCQkJCQkJCWxvY2FsIGNkID0gdG9zdHJpbmcocm91bmQoc3BlbGxEYXRhLmN1cnJlbnRDZCkpCgkJCQkJCQkJCWxvY2FsIHRleHRBcmVhID0gR2V0VGV4dEFyZWEoY2QsIDE0KQoJCQkJCQkJCQlEcmF3VGV4dChjZCwgMTQsIHggLSAodGV4dEFyZWEueCAvIDIpICsgMTIuNSwgeSArIDUsIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkKCQkJCQkJCQllbmQKCQkJCQkJCWVuZAoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoKCQkJCWlmIENvbmZpZy5vdmVyaGVhZEhVRC5kcmF3U3VtbW9uZXJzIHRoZW4KCQkJCQlmb3Igc3BlbGxJZCA9IFNVTU1PTkVSXzEsIFNVTU1PTkVSXzIgZG8KCQkJCQkJbG9jYWwgc3BlbGxEYXRhID0gaGVybzpHZXRTcGVsbERhdGEoc3BlbGxJZCkKCQkJCQkJbG9jYWwgeCA9IGJhclBvcy54IC0gMTQKCQkJCQkJbG9jYWwgeSA9IGJhclBvcy55ICsgKHNwZWxsSWQgLSBTVU1NT05FUl8xKSAqIDEzCgkJCQkJCWlmIHNlbGYuc3VtbW9uZXJTcHJpdGVzW3NwZWxsRGF0YS5uYW1lXSB0aGVuCgkJCQkJCQlzZWxmLnN1bW1vbmVyU3ByaXRlc1tzcGVsbERhdGEubmFtZV06RHJhdyh4LCB5LCAyNTUpCgkJCQkJCWVuZAoJCQkJCQlpZiBzcGVsbERhdGEuY3VycmVudENkID4gMCB0aGVuCgkJCQkJCQlEcmF3UmVjdGFuZ2xlKHgsIHksIDEzLCAxMywgQVJHQigxMjgsIDAsIDAsIDApKQoKCQkJCQkJCWxvY2FsIGN4ID0geCArIDYKCQkJCQkJCWxvY2FsIGN5ID0geSArIDYKCQkJCQkJCWxvY2FsIGFuZ2xlID0gbWF0aC5yYWQoLTkwICsgKChzcGVsbERhdGEudG90YWxDb29sZG93biAtIHNwZWxsRGF0YS5jdXJyZW50Q2QpIC8gc3BlbGxEYXRhLnRvdGFsQ29vbGRvd24pICogMzYwKQoJCQkJCQkJRHJhd0xpbmUoY3gsIGN5LCBjeCArIG1hdGguY29zKGFuZ2xlKSAqIDYsIGN5ICsgbWF0aC5zaW4oYW5nbGUpICogNiwgMSwgQVJHQigyNTUsIDI1NSwgMjU1LCAyNTUpKQoKCQkJCQkJCWlmIENvbmZpZy5vdmVyaGVhZEhVRC5zaG93RGV0YWlscyB0aGVuCgkJCQkJCQkJbG9jYWwgY2QgPSB0b3N0cmluZyhyb3VuZChzcGVsbERhdGEuY3VycmVudENkKSkKCQkJCQkJCQlsb2NhbCB0ZXh0QXJlYSA9IEdldFRleHRBcmVhKGNkLCAxNCkKCQkJCQkJCQlEcmF3VGV4dChjZCwgMTQsIHggLSB0ZXh0QXJlYS54IC0gMiwgeSAsIEFSR0IoMjU1LCAyNTUsIDI1NSwgMjU1KSkKCQkJCQkJCWVuZAoJCQkJCQllbmQKCQkJCQllbmQKCQkJCWVuZAoJCQllbmQKCQllbmQKCWVuZAplbmQKCmZ1bmN0aW9uIG92ZXJoZWFkSFVEOk9uVW5sb2FkKCkKCWlmIHNlbGYuT0hGcmFtZSB0aGVuCgkJc2VsZi5PSEZyYW1lOlJlbGVhc2UoKQoJZW5kCgoJZm9yIF8sIHNwcml0ZSBpbiBwYWlycyhzZWxmLnN1bW1vbmVyU3ByaXRlcykgZG8KCQlpZiBzcHJpdGUgdGhlbgoJCQlzcHJpdGU6UmVsZWFzZSgpCgkJZW5kCgllbmQKZW5kCgpjbGFzcyAiY29ubmVjdGlvblN0YXR1cyIKCmxvY2FsIFNUQVRVU19ESVNDT05ORUNURUQJPSAtMQpsb2NhbCBTVEFUVVNfQ09OTkVDVEVECQk9IDAKbG9jYWwgU1RBVFVTX1JFQ09OTkVDVElORwk9IDEKCmZ1bmN0aW9uIGNvbm5lY3Rpb25TdGF0dXM6X19pbml0KCkKCUFkZFJlY3ZQYWNrZXRDYWxsYmFjayhmdW5jdGlvbihwKSBzZWxmOk9uUmVjdlBhY2tldChwKSBlbmQpCmVuZAoKZnVuY3Rpb24gY29ubmVjdGlvblN0YXR1czpPblJlY3ZQYWNrZXQocCkKCWlmIHAuaGVhZGVyID09IDE1MiB0aGVuIC0tIFBsYXllciBkaXNjb25uZWN0ZWQKCQlwLnBvcyA9IDUKCQlsb2NhbCBuZXR3b3JrSUQgPSBwOkRlY29kZUYoKQoJCWZvciBfLCBoZXJvIGluIHBhaXJzKGVuZW15SGVyb2VzKSBkbwoJCQlpZiBoZXJvLm5ldHdvcmtJRCA9PSBuZXR3b3JrSUQgdGhlbgoJCQkJaGVyby5jb25uZWN0aW9uU3RhdHVzID0gU1RBVFVTX0RJU0NPTk5FQ1RFRAoJCQkJcmV0dXJuIFByaW50Q2hhdChoZXJvLmNoYXJOYW1lIC4uICIgaGFzIDxmb250IGNvbG9yPVwiI0ZGMjIyMlwiPmRpc2Nvbm5lY3RlZDwvZm9udD4iKQoJCQllbmQKCQllbmQKCgkJUHJpbnRFcnJvcigiQSBwbGF5ZXIgaGFzIGRpc2Nvbm5lY3RlZCBbY29ubmVjdGlvblN0YXR1c10iKQoJZWxzZWlmIHAuaGVhZGVyID09IDAgdGhlbiAtLSBQbGF5ZXIgcmVjb25uZWN0aW5nCgkJZm9yIF8sIGhlcm8gaW4gcGFpcnMoZW5lbXlIZXJvZXMpIGRvCgkJCWlmIGhlcm8uY29ubmVjdGlvblN0YXR1cyA9PSBTVEFUVVNfRElTQ09OTkVDVEVEIHRoZW4KCQkJCWhlcm8uY29ubmVjdGlvblN0YXR1cyA9IFNUQVRVU19SRUNPTk5FQ1RJTkcKCQkJCXJldHVybiBQcmludENoYXQoaGVyby5jaGFyTmFtZSAuLiAiIGlzIDxmb250IGNvbG9yPVwiI0ZGOEMwMFwiPnJlY29ubmVjdGluZzwvZm9udD4iKQoJCQllbmQKCQllbmQKCQlQcmludEVycm9yKCJBIHBsYXllciBpcyByZWNvbm5lY3RpbmcgW2Nvbm5lY3Rpb25TdGF0dXNdIikKCWVsc2VpZiBwLmhlYWRlciA9PSA0IHRoZW4gLS0gUGxheWVyIHJlY29ubmVjdGVkCgkJZm9yIF8sIGhlcm8gaW4gcGFpcnMoZW5lbXlIZXJvZXMpIGRvCgkJCWlmIGhlcm8uY29ubmVjdGlvblN0YXR1cyA9PSBTVEFUVVNfUkVDT05ORUNUSU5HIHRoZW4KCQkJCWhlcm8uY29ubmVjdGlvblN0YXR1cyA9IFNUQVRVU19DT05ORUNURUQKCQkJCXJldHVybiBQcmludENoYXQoaGVyby5jaGFyTmFtZSAuLiAiIGhhcyA8Zm9udCBjb2xvcj1cIiMzMkNEMzJcIj5yZWNvbm5lY3RlZDwvZm9udD4iKQoJCQllbmQKCQllbmQKCQlQcmludEVycm9yKCJBIHBsYXllciBoYXMgY29ubmVjdGVkIFtjb25uZWN0aW9uU3RhdHVzXSIpCgllbmQKZW5kCgpjbGFzcyAicmVjYWxsVHJhY2tlciIKCmZ1bmN0aW9uIHJlY2FsbFRyYWNrZXI6X19pbml0KCkKCXNlbGYucmVjYWxsQmFyID0gRmlsZUV4aXN0KFNQUklURV9QQVRIIC4uICJteVZpc2lvblxcUmVjYWxsQmFyLnBuZyIpIGFuZCBjcmVhdGVTcHJpdGUoIm15VmlzaW9uXFxSZWNhbGxCYXIucG5nIikKCglzZWxmLmFjdGl2ZVJlY2FsbHMgPSB7fQoKCUFkZFJlY3ZQYWNrZXRDYWxsYmFjayhmdW5jdGlvbihwKSBzZWxmOk9uUmVjdlBhY2tldChwKSBlbmQpCglBZHZhbmNlZENhbGxiYWNrOmJpbmQoIk9uTG9zZVZpc2lvbiIsIGZ1bmN0aW9uKHVuaXQpIHNlbGY6T25Mb3NlVmlzaW9uKHVuaXQpIGVuZCkKCUFkZERyYXdDYWxsYmFjayhmdW5jdGlvbigpIHNlbGY6T25EcmF3KCkgZW5kKQplbmQKCmZ1bmN0aW9uIHJlY2FsbFRyYWNrZXI6T25SZWN2UGFja2V0KHApCglpZiBwLmhlYWRlciA9PSAyMTYgdGhlbiAtLSBUZWxlcG9ydC9SZWNhbGwgcGFja2V0CgkJcC5wb3MgPSA1CgkJbG9jYWwgc291cmNlTmV0d29ya0lkID0gcDpEZWNvZGVGKCkKCQlsb2NhbCBzb3VyY2UgPSBvYmpNYW5hZ2VyOkdldE9iamVjdEJ5TmV0d29ya0lkKHNvdXJjZU5ldHdvcmtJZCkKCgkJaWYgc291cmNlIGFuZCBzb3VyY2UudGVhbSA9PSBURUFNX0VORU1ZIHRoZW4KCQkJcC5wb3MgPSA3NQoJCQlsb2NhbCB0ZWxlcG9ydFR5cGUgPSBwOkRlY29kZVN0cmluZygpCgoJCQlpZiB0ZWxlcG9ydFR5cGUgPT0gIlJlY2FsbCIgdGhlbgoJCQkJbG9jYWwgY2hhbm5lbER1cmF0aW9uID0gOC4wCgkJCQlkbwoJCQkJCXAucG9zID0gMTM5CgkJCQkJbG9jYWwgcmVjYWxsVHlwZSA9IHA6RGVjb2RlU3RyaW5nKCkKCgkJCQkJaWYgcmVjYWxsVHlwZSA9PSAicmVjYWxsaW1wcm92ZWQiIHRoZW4KCQkJCQkJY2hhbm5lbER1cmF0aW9uID0gNy4wCgkJCQkJZWxzZWlmIHJlY2FsbFR5cGUgPT0gIk9kaW5SZWNhbGwiIHRoZW4KCQkJCQkJY2hhbm5lbER1cmF0aW9uID0gNC41CgkJCQkJZWxzZWlmIHJlY2FsbFR5cGUgPT0gIm9kaW5yZWNhbGxpbXByb3ZlZCIgdGhlbgoJCQkJCQljaGFubmVsRHVyYXRpb24gPSA0LjAKCQkJCQllbmQKCQkJCWVuZAoKCQkJCXNlbGYuYWN0aXZlUmVjYWxsc1tzb3VyY2VOZXR3b3JrSWRdID0geyBzb3VyY2UgPSBzb3VyY2UsIHN0YXJ0VCA9IEdldEluR2FtZVRpbWVyKCksIGNoYW5uZWxEdXJhdGlvbiA9IGNoYW5uZWxEdXJhdGlvbiB9CgkJCWVsc2UKCQkJCWxvY2FsIHJlY2FsbCA9IHNlbGYuYWN0aXZlUmVjYWxsc1tzb3VyY2VOZXR3b3JrSWRdCgoJCQkJaWYgcmVjYWxsIHRoZW4KCQkJCQlpZiByZWNhbGwuc291cmNlLmxhc3RTZWVuVCB0aGVuCgkJCQkJCXJlY2FsbC5zb3VyY2UubGFzdFNlZW5UID0gcmVjYWxsLnNvdXJjZS5sYXN0U2VlblQgKyAoR2V0SW5HYW1lVGltZXIoKSAtIHJlY2FsbC5zdGFydFQpCgkJCQkJZW5kCgoJCQkJCWlmIEdldEluR2FtZVRpbWVyKCkgPiByZWNhbGwuc3RhcnRUICsgcmVjYWxsLmNoYW5uZWxEdXJhdGlvbiAtIDAuMDUgdGhlbgoJCQkJCQlQcmludENoYXQocmVjYWxsLnNvdXJjZS5jaGFyTmFtZSAuLiAiIGhhcyA8Zm9udCBjb2xvcj1cIiMxRTkwRkZcIj5yZWNhbGxlZDwvZm9udD4iKQoJCQkJCWVuZAoJCQkJCXNlbGYuYWN0aXZlUmVjYWxsc1tzb3VyY2VOZXR3b3JrSWRdID0gbmlsCgkJCQllbmQKCQkJZW5kCgkJZW5kCgllbmQKZW5kCgpmdW5jdGlvbiByZWNhbGxUcmFja2VyOk9uTG9zZVZpc2lvbih1bml0KQoJZm9yIF8sIHJlY2FsbCBpbiBwYWlycyhzZWxmLmFjdGl2ZVJlY2FsbHMpIGRvCgkJaWYgcmVjYWxsLnNvdXJjZS5uZXR3b3JrSUQgPT0gdW5pdC5uZXR3b3JrSUQgdGhlbgoJCQlyZWNhbGwuc291cmNlLmxhc3RTZWVuVCA9IEdldEluR2FtZVRpbWVyKCkKCQkJYnJlYWsKCQllbmQKCWVuZAplbmQKCmZ1bmN0aW9uIHJlY2FsbFRyYWNrZXI6T25EcmF3KCkKCWxvY2FsIHN0ciA9ICIiCglsb2NhbCB4ID0gV0lORE9XX1cgLyAyIC0gMTI1Cglsb2NhbCB5ID0gV0lORE9XX0ggLSAoV0lORE9XX0ggLyA1KQoKCS0tIENvdW50IG51bWJlciBvZiBhY3RpdmUgcmVjYWxscyBhbmQgY29tcHV0ZSBzdHJpbmcKCWxvY2FsIHJlY2FsbENvdW50ID0gMAoKCWZvciBfLCByZWNhbGwgaW4gcGFpcnMoc2VsZi5hY3RpdmVSZWNhbGxzKSBkbwoJCXN0ciA9IHN0ciAuLiByZWNhbGwuc291cmNlLmNoYXJOYW1lIC4uICIgKyAiCgkJcmVjYWxsQ291bnQgPSByZWNhbGxDb3VudCArIDEKCWVuZAoKCWlmIHJlY2FsbENvdW50ID09IDAgdGhlbgoJCXJldHVybgoJZWxzZQoJCXN0ciA9IHN0cjpzdWIoMSwgLTMpIC4uIChyZWNhbGxDb3VudCA+IDEgYW5kICJhcmUgcmVjYWxsaW5nIiBvciAiaXMgcmVjYWxsaW5nIikKCWVuZAoKCURyYXdSZWN0YW5nbGUoeCwgeSwgMjUwLCA1LCAweEMwMDAwMDAwKQoKCWRvCgkJbG9jYWwgaGFsZlRleHRXaWR0aCA9IEdldFRleHRBcmVhKHN0ciwgMTYpLnggLyAyCgkJRHJhd1RleHQoc3RyLCAxNiwgV0lORE9XX1cgLyAyIC0gaGFsZlRleHRXaWR0aCwgeSAtIDI1LCBBUkdCKDI1NSwgMjU1LCAyNTUsIDI1NSkpCgllbmQKCglsb2NhbCBpID0gMQoJZm9yIF8sIHJlY2FsbCBpbiBwYWlycyhzZWxmLmFjdGl2ZVJlY2FsbHMpIGRvCgkJbG9jYWwgd2lkdGggPSAocmVjYWxsLnN0YXJ0VCArIHJlY2FsbC5jaGFubmVsRHVyYXRpb24gLSBHZXRJbkdhbWVUaW1lcigpKSAvIHJlY2FsbC5jaGFubmVsRHVyYXRpb24gKiAyNTAKCQlsb2NhbCBhbHBoYSA9ICgyNTUgLyByZWNhbGxDb3VudCkgKiBpCgkJaWYgc2VsZi5yZWNhbGxCYXIgdGhlbgoJCQlzZWxmLnJlY2FsbEJhcjpEcmF3RXgoUmVjdCgwLCAwLCB3aWR0aCwgNSksIEQzRFhWRUNUT1IzKDAsMCwwKSwgRDNEWFZFQ1RPUjMoeCx5LDApLCBhbHBoYSkKCQllbHNlCgkJCURyYXdSZWN0YW5nbGUoeCwgeSwgd2lkdGgsIDUsIEFSR0IoYWxwaGEsIDI1NSwgMCwgMCkpCgkJZW5kCgoJCWlmIENvbmZpZy5yZWNhbGxUcmFja2VyLmRyYXdNaW5pbWFwIGFuZCBub3QgcmVjYWxsLnNvdXJjZS52aXNpYmxlIGFuZCByZWNhbGwuc291cmNlLmxhc3RTZWVuVCB0aGVuCgkJCWxvY2FsIGRpc3RhbmNlID0gbWF0aC5taW4ocmVjYWxsLnNvdXJjZS5tcyAqIChyZWNhbGwuc291cmNlLnJlY2FsbFN0YXJ0IC0gcmVjYWxsLnNvdXJjZS5sYXN0U2VlblQpLCBDb25maWcucmVjYWxsVHJhY2tlci5tYXhTaXplKQoJCQlsb2NhbCByYWRpdXMgPSBHZXRNaW5pbWFwWChyZWNhbGwuc291cmNlLnggKyBkaXN0YW5jZSkgLSBHZXRNaW5pbWFwWChyZWNhbGwuc291cmNlLngpCgkJCURyYXdDaXJjbGUyRChHZXRNaW5pbWFwWChyZWNhbGwuc291cmNlLngpLCBHZXRNaW5pbWFwWShyZWNhbGwuc291cmNlLnopLCByYWRpdXMsIDEsIEFSR0IoMjU1LCAwLCAyNTUsIDApKQoJCWVuZAoKCQlpID0gaSArIDEKCWVuZAplbmQK"), nil, "bt", _ENV))()
